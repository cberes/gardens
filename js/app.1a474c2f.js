(function(e){function t(t){for(var r,i,c=t[0],o=t[1],l=t[2],p=0,d=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"14d9":function(e,t,n){},"1af8":function(e,t,n){"use strict";n("9c4a")},"1e67":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{attrs:{includeAuthButton:!1}},[n("Authenticate")],1)},a=[],s=n("6f39"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("amplify-authenticator",{attrs:{authConfig:e.authConfig}})],1)},c=[],o=n("5530"),l=n("2f62"),u=n("4327"),p=n("2ef0"),d=n.n(p),f={name:"authenticate",data:function(){return{authConfig:{usernameAttributes:"email"}}},created:function(){u["a"].listen("auth",this.authStateChanged)},beforeDestroy:function(){u["a"].remove("auth",this.authStateChanged)},computed:Object(o["a"])({},Object(l["c"])("auth",["redirectFrom"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(l["b"])("auth",["clearRedirect"])),Object(l["b"])("species",["invalidateCache"])),{},{authStateChanged:function(e){"signIn"===e.payload.event&&(this.invalidateCache(),this.redirectAfterLogin())},redirectAfterLogin:function(){if(this.redirectFrom){var e=d.a.cloneDeep(this.redirectFrom);this.clearRedirect(),this.$router.push(e)}else this.$router.push({name:"home"})}})},h=f,m=n("2877"),g=Object(m["a"])(h,i,c,!1,null,"3fcc3b4c",null),b=g.exports,v={components:{Layout:s["a"],Authenticate:b}},S=v,_=Object(m["a"])(S,r,a,!1,null,"47a7a087",null);t["default"]=_.exports},"1f6f":function(e,t,n){},3352:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",[n("div",{staticClass:"container"},[n("h2",[e._v("Plant list")]),n("SpeciesList")],1)])},a=[],s=n("6f39"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{direction:"vertical"}},[e.signedIn?e._e():n("el-row",{staticClass:"intro"},[n("p",[n("em",[e._v("Flower Companion")]),e._v(" helps you manage your plant collection!")]),n("p",[e._v("Take a look at the example list of plants below, or "),n("strong",[e._v("Sign In")]),e._v(" to add your own plants.")])]),n("el-row",{staticClass:"buttons"},[n("el-button",{on:{click:e.clearFilter}},[e._v("Reset filters")]),n("el-button",{on:{click:e.addSpecies}},[e._v("Add plant")])],1),n("el-row",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"species",staticStyle:{width:"100%"},attrs:{data:e.tableRows}},[n("el-table-column",{attrs:{prop:"name",label:"Plant",sortable:"","column-key":"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){return n.preventDefault(),e.loadSpecies(t.row.id)}}},[e._v(" "+e._s(t.row.name)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"gardens",label:"Gardens",formatter:e.formatArray,filters:e.gardenFilters,"filter-method":e.filterArray}}),n("template",{slot:"empty"},[e._v(" Click "),n("strong",[e._v("Add plant")]),e._v(" to add a new plant. ")])],2)],1)],1)},c=[],o=(n("4160"),n("c975"),n("d81d"),n("b0c0"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("5530")),l=n("2f62"),u=n("4327"),p={name:"species-list",data:function(){return{species:[],signedIn:!1,error:null,loading:!0}},created:function(){var e=this;u["a"].listen("auth",this.authStateChanged),this.currentSession().then((function(t){return e.signedIn=!!t}))},beforeDestroy:function(){u["a"].remove("auth",this.authStateChanged)},mounted:function(){this.loadAllSpecies()},computed:{gardenFilters:function(){var e=[],t=new Set;return this.species.forEach((function(n){n.plants.map((function(e){return e.garden})).forEach((function(n){t.has(n)||(t.add(n),e.push({text:n,value:n}))}))})),e},tableRows:function(){return this.species.map((function(e){return{id:e.species.id,name:e.species.name,gardens:e.plants.map((function(e){return e.garden}))}}))}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(l["b"])("auth",["currentSession"])),Object(l["b"])("species",["fetchAllSpecies","invalidateCache"])),{},{authStateChanged:function(e){"signOut"===e.payload.event&&(this.invalidateCache(),this.loadAllSpecies(),this.signedIn=!1)},loadAllSpecies:function(){var e=this;this.loading=!0,this.fetchAllSpecies().then((function(t){e.species=t,e.loading=!1})).catch(console.error)},formatArray:function(e,t,n){return 0===n.length?"":1===n.length?n[0]:n[0]+" and "+(n.length-1)+" more"},filterArray:function(e,t,n){var r=n.property;return-1!==t[r].indexOf(e)},clearFilter:function(){this.$refs.species.clearFilter()},loadSpecies:function(e){this.$router.push({name:"species",params:{id:e}})},addSpecies:function(){this.$router.push({name:"add-species"})}})},d=p,f=(n("8823"),n("2877")),h=Object(f["a"])(d,i,c,!1,null,"d803aa00",null),m=h.exports,g={components:{Layout:s["a"],SpeciesList:m}},b=g,v=Object(f["a"])(b,r,a,!1,null,"246bbd29",null);t["default"]=v.exports},"38c0":function(e,t,n){"use strict";n("d15d")},4371:function(e,t,n){"use strict";n("dec3")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("5c96"),s=n.n(a),i=(n("0fae"),n("e05f"),n("b2d6")),c=n.n(i),o=n("00bd"),l=n("19b2"),u={apiUrl:"https://v4yu3lt9z0.execute-api.us-east-1.amazonaws.com/v1",baseUrl:""},p={Auth:{region:"us-east-1",userPoolWebClientId:"1ieqckj3mhe128010e61eq6icg",userPoolId:"us-east-1_Ez8ufbfNG"}},d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view",{key:e.$route.fullPath})],1)},f=[],h=n("5530"),m={name:"app",components:Object(h["a"])({},l["components"])},g=m,b=(n("034f"),n("2877")),v=Object(b["a"])(g,d,f,!1,null,null,null),S=v.exports,_=(n("99af"),n("2909")),y=n("8c4f"),E=[{path:"/authenticate",name:"authenticate",component:n("1e67").default}],O=[{path:"/",name:"home",component:n("3352").default},{path:"/",name:"species-list",component:n("3352").default},{path:"/plant/:id",name:"species",component:n("bc89").default,props:!0},{path:"/plant/add",name:"add-species",component:n("8630").default,props:!0},{path:"/plant/edit/:id",name:"edit-species",component:n("8630").default,props:!0}];r["default"].use(y["a"]);var w=new y["a"]({mode:"history",base:u.baseUrl,routes:[].concat(Object(_["a"])(E),Object(_["a"])(O),[{path:"/404",name:"404",component:n("d059").default,props:!0},{path:"*",redirect:"404"}])}),x=w,C=n("2f62"),j=n("bf82"),A={currentSession:function(){return j["a"].currentSession().catch((function(e){return console.log(e)}))},signOut:function(){return j["a"].signOut()}},k={authToken:null,clientId:"",userPoolId:"",redirectFrom:null},I={SET_AUTH_TOKEN:function(e,t){e.authToken=t},SET_REDIRECT_FROM:function(e,t){e.redirectFrom=t}},D={setAuthToken:function(e,t){var n=e.commit;n("SET_AUTH_TOKEN",t)},setRedirect:function(e,t){var n=e.commit;n("SET_REDIRECT_FROM",t)},clearRedirect:function(e){var t=e.commit;t("SET_REDIRECT_FROM",null)},currentSession:function(){return A.currentSession()},signOut:function(){return A.signOut()}},P={namespaced:!0,state:k,mutations:I,actions:D},T=(n("c740"),n("4160"),n("a434"),n("d3b7"),n("159b"),n("96cf"),n("1da1")),$=n("bc3a"),L=n.n($),R={get:function(e,t){var n=t&&{headers:t};return L.a.get(e,n)},post:function(e,t,n){var r=n&&{headers:n};return L.a.post(e,t,r)},delete:function(e,t){var n=t&&{headers:t};return L.a.delete(e,n)}},F=u.apiUrl+"/api/species",M=u.apiUrl+"/api/public/species",U={getAllSpecies:function(e){var t=e?F:M;return R.get(t,e&&{Authorization:e})},getSpecies:function(e,t){var n=(t?F:M)+"/"+e;return R.get(n,t&&{Authorization:t})},updateSpeciesAndPlants:function(e,t){var n=F;return R.post(n,e,{Authorization:t})},deleteSpecies:function(e,t){var n=F+"/"+e;return R.delete(n,{Authorization:t})}},G=10,N=function(){var e=new Date;return e.setMinutes(e.getMinutes()+G),e},q=function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A.currentSession();case 2:return t=e.sent,e.abrupt("return",t&&t.getIdToken().getJwtToken());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H={allSpecies:null,allSpeciesExpires:Date.now(),cache:{}},z={SET_ALL_SPECIES:function(e,t){r["default"].set(e,"allSpecies",t),r["default"].set(e,"allSpeciesExpires",N())},ADD_SPECIES:function(e,t){r["default"].set(e.cache,t.species.id,t)},DELETE_SPECIES:function(e,t){r["default"].delete(e.cache,t)},DELETE_FROM_ALL_SPECIES:function(e,t){if(e.allSpecies){var n=e.allSpecies.findIndex((function(e){return e.species.id===t}));-1!==n&&e.allSpecies.splice(n,1)}},INVALIDATE_CACHE:function(e){r["default"].set(e,"allSpecies",null)}},B={fetchAllSpecies:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.state,e.rootState,!(r.allSpecies&&Date.now()<=r.allSpeciesExpires)){t.next=3;break}return t.abrupt("return",Promise.resolve(r.allSpecies));case 3:return t.next=5,q();case 5:return a=t.sent,t.abrupt("return",U.getAllSpecies(a).then((function(e){return e.data.results||[]})).then((function(e){return n("SET_ALL_SPECIES",e),e.forEach((function(e){return n("ADD_SPECIES",e)})),e})).catch((function(e){return console.error("Failed to get all species",e),[]})));case 7:case"end":return t.stop()}}),t)})))()},fetchSpecies:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,a=e.state,e.rootState,s=a.cache[t],!s){n.next=4;break}return n.abrupt("return",Promise.resolve(s));case 4:return n.next=6,q();case 6:return i=n.sent,n.abrupt("return",U.getSpecies(t,i).then((function(e){return r("ADD_SPECIES",e.data.result),e.data.result})));case 8:case"end":return n.stop()}}),n)})))()},saveSpecies:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("INVALIDATE_CACHE"),n.next=4,q();case 4:return a=n.sent,n.abrupt("return",U.updateSpeciesAndPlants(t,a));case 6:case"end":return n.stop()}}),n)})))()},deleteSpecies:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("DELETE_SPECIES",t),r("DELETE_FROM_ALL_SPECIES",t),n.next=5,q();case 5:return a=n.sent,n.abrupt("return",U.deleteSpecies(t,a));case 7:case"end":return n.stop()}}),n)})))()},invalidateCache:function(e){var t=e.commit;t("INVALIDATE_CACHE")}},W={namespaced:!0,state:H,mutations:z,actions:B},V=u.apiUrl+"/api/gardens",Y={getGardens:function(e){var t=V;return R.get(t,e&&{Authorization:e})}},J={},K={},Q={fetchGardens:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,t.next=3,A.currentSession();case 3:return n=t.sent,r=n.getIdToken().getJwtToken(),t.next=7,Y.getGardens(r);case 7:return a=t.sent,t.abrupt("return",a.data.gardens||[]);case 9:case"end":return t.stop()}}),t)})))()}},X={namespaced:!0,state:J,mutations:K,actions:Q};r["default"].use(C["a"]);var Z=new C["a"].Store({state:{},mutations:{},actions:{},modules:{auth:P,species:W,plant:X}}),ee=(n("caad"),n("b0c0"),function(e){e.beforeEach((function(t,n,r){return"authenticate"===t.name?ne(e,r):te(t)?ae(e,t,r):void r()}))});function te(e){return["add-species","edit-species"].includes(e.name)}function ne(e,t){return re.apply(this,arguments)}function re(){return re=Object(T["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A.currentSession();case 2:if(!e.sent){e.next=5;break}return n({name:"home"}),e.abrupt("return");case 5:n();case 6:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ae(e,t,n){return se.apply(this,arguments)}function se(){return se=Object(T["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A.currentSession();case 2:if(e.sent){e.next=7;break}t.app.$store.dispatch("auth/setRedirect",{name:n.name,params:n.params,query:n.query}),r({name:"authenticate"}),e.next=8;break;case 7:r();case 8:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}n("336d"),r["default"].config.productionTip=!1,r["default"].use(s.a,{locale:c.a}),o["default"].configure(p),r["default"].use(l["AmplifyPlugin"],o),ee(x),new r["default"]({router:x,store:Z,render:function(e){return e(S)}}).$mount("#app")},"6f39":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"main"},[n("el-container",{attrs:{direction:"horizontal"}},[n("el-header",[n("Header",{attrs:{title:e.title}})],1),n("div",{staticClass:"aside-auth"},[e.includeAuthButton?n("AuthenticateButton"):e._e()],1)],1),n("el-main",[e._t("default")],2),n("el-footer",[n("Footer")],1)],1)},a=[],s=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" © 2020 Corey Beres. Source available on "),n("a",{attrs:{href:"https://github.com/cberes/gardens"}},[e._v("GitHub")]),e._v(". ")])}],c={},o=c,l=n("2877"),u=Object(l["a"])(o,s,i,!1,null,"258de934",null),p=u.exports,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",[n("img",{attrs:{src:"/img/logo.png"}}),n("router-link",{attrs:{to:"/"}},[e._v(e._s(e.titleOrDefault))])],1)},f=[],h={props:{title:{type:String,default:""}},computed:{titleOrDefault:function(){return this.title||"Your plants"}}},m=h,g=(n("1af8"),Object(l["a"])(m,d,f,!1,null,"03522519",null)),b=g.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.signedIn?n("el-button",{on:{click:e.doSignOut}},[e._v("Sign Out")]):n("el-button",{on:{click:e.goAuth}},[e._v("Sign In")])},S=[],_=n("5530"),y=n("2f62"),E={name:"authenticate-button",data:function(){return{signedIn:!1}},created:function(){var e=this;this.currentSession().then((function(t){return e.signedIn=!!t}))},methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Object(y["b"])("auth",["currentSession","signOut"])),Object(y["b"])("species",["invalidateCache"])),{},{doSignOut:function(){this.invalidateCache(),this.signOut().then(this.afterSignOut).catch(console.error)},afterSignOut:function(){this.signedIn=!1,this.goHome()},goHome:function(){this.$router.push({name:"home"})},goAuth:function(){this.$router.push({name:"authenticate"})}})},O=E,w=Object(l["a"])(O,v,S,!1,null,"2db4ad8e",null),x=w.exports,C={components:{Footer:p,Header:b,AuthenticateButton:x},props:{title:{type:String,default:""},includeAuthButton:{type:Boolean,default:!0}},data:function(){return{menuOpen:!1}}},j=C,A=(n("4371"),Object(l["a"])(j,r,a,!1,null,"1444fba6",null));t["a"]=A.exports},"85ec":function(e,t,n){},8630:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",[n("EditSpecies",{attrs:{speciesId:e.$route.params.id}})],1)},a=[],s=n("6f39"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{model:e.species,rules:e.rules,"label-width":"200px"}},[n("el-form-item",{attrs:{label:"Plant name",prop:"name"}},[n("el-input",{attrs:{placeholder:"plant's most common name"},model:{value:e.species.name,callback:function(t){e.$set(e.species,"name",t)},expression:"species.name"}})],1),n("el-form-item",{attrs:{label:"Plant name alternate",prop:"alternateName"}},[n("el-input",{attrs:{placeholder:"scientific name or common name"},model:{value:e.species.alternateName,callback:function(t){e.$set(e.species,"alternateName",t)},expression:"species.alternateName"}})],1),n("el-form-item",{attrs:{label:"Light preference",prop:"light"}},[n("el-select",{model:{value:e.species.light,callback:function(t){e.$set(e.species,"light",t)},expression:"species.light"}},[n("el-option",{attrs:{label:"Full sun",value:"FULL"}}),n("el-option",{attrs:{label:"Part sun",value:"PARTIAL"}}),n("el-option",{attrs:{label:"Shade",value:"SHADE"}})],1)],1),n("el-form-item",{attrs:{label:"Soil moisture",prop:"moisture"}},[n("el-select",{model:{value:e.species.moisture,callback:function(t){e.$set(e.species,"moisture",t)},expression:"species.moisture"}},[n("el-option",{attrs:{label:"Wet",value:"WET"}}),n("el-option",{attrs:{label:"Medium-wet",value:"MEDIUM_WET"}}),n("el-option",{attrs:{label:"Medium",value:"MEDIUM"}}),n("el-option",{attrs:{label:"Medium-dry",value:"MEDIUM_DRY"}}),n("el-option",{attrs:{label:"Dry",value:"DRY"}})],1)],1),n("el-form-item",{attrs:{label:"Gardens",prop:"plants"}},[n("PlantListEditor",{on:{delete:e.deletePlant},model:{value:e.plants,callback:function(t){e.plants=t},expression:"plants"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(e._s(e.submitText))]),n("el-button",{on:{click:e.onCancel}},[e._v("Cancel")])],1)],1)},c=[],o=(n("d3b7"),n("5530")),l=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{direction:"vertical"}},[n("el-row",[n("el-popover",{attrs:{placement:"right",width:"200",content:"Press enter to add a new garden",trigger:"manual",value:e.hintVisible}},[n("el-autocomplete",{attrs:{slot:"reference",placeholder:"Please input","fetch-suggestions":e.querySearch,"trigger-on-focus":!1,"select-when-unmatched":!0},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterPressed(t)},select:e.handleSelect},slot:"reference",model:{value:e.newGarden,callback:function(t){e.newGarden=t},expression:"newGarden"}})],1)],1),n("el-row",e._l(e.plants,(function(t){return n("el-tag",{key:t.key,attrs:{closable:"",type:"success",effect:"plain"},on:{close:function(n){return e.deletePlant(t.key)}}},[e._v(" "+e._s(t.garden)+" ")])})),1)],1)},p=[],d=(n("4de4"),n("c740"),n("c975"),n("d81d"),n("a434"),n("b0c0"),n("25f0"),{name:"plant-list-editor",props:{value:{type:Array,required:!1}},data:function(){return{plants:this.createPlants(this.value),gardens:null,newGarden:"",resultsFound:0}},computed:{hintVisible:function(){return this.newGarden.length>0&&0===this.resultsFound}},watch:{value:function(e,t){this.plants=this.createPlants(e)}},mounted:function(){this.loadGardens()},methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])("plant",["fetchGardens"])),{},{loadGardens:function(){var e=this;this.fetchGardens().catch((function(e){return console.error("Failed to get gardens",e),[]})).then((function(t){return e.gardens=t.map((function(e){return{name:e.name,key:e.name.toLowerCase()}}))}))},createPlants:function(e){return e.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{key:e.id})}))},querySearch:function(e,t){var n=e.toLowerCase(),r=this.gardens.filter((function(e){return 0===e.key.indexOf(n)})).map((function(e){return{value:e.name}}));this.resultsFound=r.length,t(r)},handleSelect:function(e){var t=e.value;this.plants.push({key:Date.now().toString(),garden:t}),this.$emit("input",this.plants),this.clearGarden()},clearGarden:function(){this.newGarden=""},deletePlant:function(e){var t=this.plants.findIndex((function(t){return t.key===e})),n=-1!==t?this.plants[t]:null;-1!==t&&(this.plants.splice(t,1),this.$emit("input",this.plants)),n&&n.id&&this.$emit("delete",n)}})}),f=d,h=n("2877"),m=Object(h["a"])(f,u,p,!1,null,"35d40542",null),g=m.exports,b={name:"edit-species",components:{PlantListEditor:g},props:{speciesId:{type:String,required:!1}},data:function(){return{species:{light:"FULL",moisture:"MEDIUM"},plants:[],plantsToDelete:[],loading:!!this.speciesId,rules:{name:[{required:!0,message:"Please enter a name",trigger:"blur"},{max:100,message:"Name is too long",trigger:"blur"}],alternateName:[{max:100,message:"Alternate name is too long",trigger:"blur"}],light:[{required:!0,message:"Light preference is required",trigger:"blur"}],moisture:[{required:!0,message:"Soil moisture preference is required",trigger:"blur"}]}}},mounted:function(){var e=this;this.speciesId&&this.fetchSpecies(this.speciesId).then((function(t){e.species=t.species,e.plants.push.apply(e.plants,t.plants||[]),e.loading=!1}))},computed:{submitText:function(){return this.species&&this.species.id?"Update":"Create"}},methods:Object(o["a"])(Object(o["a"])({},Object(l["b"])("species",["fetchSpecies","saveSpecies"])),{},{deletePlant:function(e){this.plantsToDelete.push(e)},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("Please correct any errors"),!1;t.doSubmit()}))},doSubmit:function(){var e=this;this.loading=!0,this.saveSpecies(this.buildRequest()).then((function(){e.notifySaveSucceeded(),e.$router.push({name:"species-list"})})).catch(this.notifySaveFailed).finally((function(){return e.loading=!1}))},buildRequest:function(){return{species:this.species,plants:this.plants,plantsToDelete:this.plantsToDelete}},notifySaveSucceeded:function(){this.$message({type:"success",message:"Plant saved successfully"})},notifySaveFailed:function(e){console.error("Error saving plant",e),this.$message.error("Uh oh, there was an error.")},onCancel:function(){this.$router.go(-1)}})},v=b,S=Object(h["a"])(v,i,c,!1,null,"1be364f8",null),_=S.exports,y={components:{Layout:s["a"],EditSpecies:_}},E=y,O=Object(h["a"])(E,r,a,!1,null,"0772f664",null);t["default"]=O.exports},8823:function(e,t,n){"use strict";n("14d9")},"9c4a":function(e,t,n){},a760:function(e,t,n){"use strict";n("1f6f")},bc89:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",[n("Species",{attrs:{speciesId:e.$route.params.id}})],1)},a=[],s=n("6f39"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.species?n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{direction:"vertical"}},[n("el-row",[e.signedIn?n("div",{attrs:{id:"edit-buttons"}},[n("el-button",{attrs:{icon:"el-icon-edit",circle:""},on:{click:e.editSpecies}}),n("el-button",{attrs:{icon:"el-icon-delete",circle:""},on:{click:e.deleteSpeciesIfConfirmed}})],1):e._e(),n("h2",[e._v(e._s(e.species.name))])]),n("el-row",{attrs:{gutter:10}},[e.species.alternateName?n("el-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix card-header",attrs:{slot:"header"},slot:"header"},[e._v("Also known as")]),n("div",{staticClass:"card-body"},[e._v(" "+e._s(e.species.alternateName)+" ")])])],1):e._e(),n("el-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix card-header",attrs:{slot:"header"},slot:"header"},[e._v("Planted")]),e.plants?n("PlantList",{staticClass:"card-body",attrs:{plants:e.plants,noneText:"Get to planting!"}}):e._e()],1)],1),n("el-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix card-header",attrs:{slot:"header"},slot:"header"},[e._v("Soil moisture")]),n("div",{staticClass:"card-body percent"},[n("el-progress",{attrs:{type:"circle",percentage:e.moisturePercent,"show-text":!1}}),n("div",[e._v(e._s(e.formatEnum(e.species.moisture)))])],1)])],1),n("el-col",{attrs:{xs:24,sm:24,md:12,lg:8,xl:8}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix card-header",attrs:{slot:"header"},slot:"header"},[e._v("Sun")]),n("div",{staticClass:"card-body percent"},[n("el-progress",{attrs:{type:"circle",percentage:e.lightPercent,status:"warning","show-text":!1}}),n("div",[e._v(e._s(e.formatEnum(e.species.light)))])],1)])],1)],1)],1):e._e()},c=[],o=(n("fb6a"),n("d3b7"),n("ac1f"),n("5319"),n("5530")),l=n("2f62"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.plants.length>0?n("el-container",{attrs:{direction:"vertical"}},e._l(e.plants,(function(t){return n("el-row",{key:t.id},[n("el-col",{attrs:{span:16}},[e._v(e._s(t.garden))]),n("el-col",{staticClass:"plant-date",attrs:{span:8}},[e._v(e._s(e.plantDate(t)))])],1)})),1):n("el-row",[e._v(" "+e._s(e.noneText)+" ")])},p=[],d=n("b166"),f=n("e3ee"),h={name:"plant-list",props:{plants:{type:Array,required:!0},noneText:{type:String,default:"None"}},methods:{plantDate:function(e){return e.planted?Object(d["a"])(Object(f["a"])(e.planted),"yyyy/MM/dd"):""}}},m=h,g=(n("a760"),n("2877")),b=Object(g["a"])(m,u,p,!1,null,"610f74d0",null),v=b.exports,S={name:"species",components:{PlantList:v},props:{speciesId:{type:String,required:!0}},data:function(){return{species:null,plants:null,loading:!0,signedIn:null}},created:function(){var e=this;this.currentSession().then((function(t){return e.signedIn=!!t}))},mounted:function(){var e=this;this.fetchSpecies(this.speciesId).then((function(t){e.species=t.species,e.plants=t.plants,e.loading=!1}))},computed:{moisturePercent:function(){switch(this.species&&this.species.moisture){case"WET":return 100;case"MEDIUM_WET":return 80;case"MEDIUM":return 60;case"MEDIUM_DRY":return 40;case"DRY":default:return 20}},lightPercent:function(){switch(this.species&&this.species.light){case"FULL":return 100;case"PARTIAL":return 66;case"SHADE":default:return 33}}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(l["b"])("auth",["currentSession"])),Object(l["b"])("species",["deleteSpecies","fetchSpecies"])),{},{editSpecies:function(){this.$router.push({name:"edit-species",params:{id:this.speciesId}})},deleteSpeciesIfConfirmed:function(){this.confirmDeleteSpecies().then(this.doDeleteSpecies).catch((function(){return console.log("canceled delete")}))},confirmDeleteSpecies:function(){return this.$confirm("This will permanently delete the plant. Continue?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"})},doDeleteSpecies:function(){var e=this;console.log("deleting species ".concat(this.speciesId)),this.loading=!0,this.deleteSpecies(this.speciesId).then((function(){e.notifyDeleteSucceeded(),e.$router.push({name:"species-list"})})).catch(this.notifyDeleteFailed).finally((function(){return e.loading=!1}))},notifyDeleteSucceeded:function(){this.$message({type:"success",message:"Plant deleted successfully"})},notifyDeleteFailed:function(){this.$message({type:"danger",message:"Delete failed"})},formatEnum:function(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase().replace("_"," "):""}})},_=S,y=(n("38c0"),Object(g["a"])(_,i,c,!1,null,"3d3d0ffb",null)),E=y.exports,O={components:{Layout:s["a"],Species:E}},w=O,x=Object(g["a"])(w,r,a,!1,null,"61aad813",null);t["default"]=x.exports},d059:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{attrs:{title:e.title}},[n("p",[e._v("We can't find what you're looking for.")]),n("p",[e._v(" Return to the "),n("router-link",{attrs:{to:"/"}},[e._v("plant list")]),e._v(". ")],1)])},a=[],s=n("6f39"),i={page:{title:"404",meta:[{name:"description",content:"404"}]},components:{Layout:s["a"]},props:{resource:{type:String,default:""}},computed:{title:function(){return"404 "+(this.resource||"")+" Not Found"}}},c=i,o=n("2877"),l=Object(o["a"])(c,r,a,!1,null,null,null);t["default"]=l.exports},d15d:function(e,t,n){},dec3:function(e,t,n){}});
//# sourceMappingURL=app.1a474c2f.js.map